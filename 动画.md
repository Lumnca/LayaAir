# :jack_o_lantern:动画 #

游戏中一大特色就是动画的制作，其实动画一般都是由许多组成，构成了我们的动画，在LayaAir中也是如此，动画由多图片组成，也就是我们所说的图集。制作图集通常采用两种方法，一是编译器将图片资源打包成为图集资源。而是由图片脚本生成。下面介绍两种使用方式：

### :ghost:打包图集 ###

这种做法比较简单，只需要将图片资源全部放在一个文件夹中，在编译器工具中选项到图集打包，选中该文件夹的父目录，会自动打包，打包会生成一个.atlas文件：

![](https://github.com/Lumnca/LayaAir/blob/master/img/a3.png)

这就是图集文件，接下来，引用该文件即可：

```javascript
Laya.init(1136,640);

Laya.stage.bgColor = "#555555"      

this.role = new Laya.Animation();

this.role.loadAtlas("../laya/assets/bz.atlas",Laya.Handler.create(this,onLoaded));

function onLoaded(){
    //添加到舞台
    Laya.stage.addChild(this.role);
}

this.role.play();
```

这样就可以看到动画运作。

### :ghost:利用createFrames()方法创建 ###

Laya.Animation.createFrames()方法接受一组图片url，并将它们组成图集动画，最后再给这个图集命名，如果想要调用这个动画，只需要使用这个名称即可。使用这种方法可以控制一个图集里的多个动画，如下例子：

这是打包图集的图片：

![](https://github.com/Lumnca/LayaAir/blob/master/img/TQ4IPVF2HD2MWZWJUVCUZHB.png)

其包含了4个动作。现在将他们做成不同的动画。

```javascript
//初始化舞台
Laya.init(1334, 750,Laya.WebGL);
//创建动画实例
this.roleAni = new Laya.Animation();
//加载动画图集，加载成功后执行回调方法
this.roleAni.loadAtlas("../laya/assets/play.atlas",Laya.Handler.create(this,onLoaded));
function onLoaded(){
    //添加到舞台
    Laya.stage.addChild(this.roleAni);
    //创建不同的动画模板
    Laya.Animation.createFrames(aniUrls("l",4),"left");
    Laya.Animation.createFrames(aniUrls("r",4),"right");
    Laya.Animation.createFrames(aniUrls("d",4),"down");
    Laya.Animation.createFrames(aniUrls("u",4),"up");
    //循环播放动画
    this.roleAni.play(0,true,"up");
}
/**
 * 创建一组动画的url数组（美术资源地址数组）
 * aniName  动作的名称，用于生成url
 * length   动画最后一帧的索引值，
 */    
function aniUrls(aniName,length){
    var urls = [];
    for(var i = 1;i<=length;i++){
        //动画资源路径要和动画图集打包前的资源命名对应起来
        urls.push("../laya/assets/play/"+aniName+i+".png");
    }
    return urls;
}
```






